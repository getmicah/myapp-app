{"version":3,"sources":["webpack:///webpack/bootstrap 14582cb36f66fd3ed012","webpack:///./src/index.tsx","webpack:///external \"React\"","webpack:///external \"ReactDOM\"","webpack:///external \"Cookies\"","webpack:///external \"moment\"","webpack:///./src/config.ts","webpack:///./config/config.json"],"names":[],"mappings":"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","file":"bundle.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 14582cb36f66fd3ed012","import * as React from \"react\"\nimport * as ReactDOM from \"react-dom\"\nimport * as Cookies from \"js-cookie\"\nimport * as moment from \"moment\"\n\nimport { Config } from \"./config\"\n\nexport interface State {\n\taccessToken: string\n}\n\nclass App extends React.Component<null, State> {\n\tconstructor() {\n\t\tsuper(null)\n\t\tthis.state = {\n\t\t\taccessToken: null\n\t\t}\n\t}\n\n\tcheckLocalStorage(): boolean {\n\t\tconst accessToken = localStorage.getItem(Config.localStorage.accessToken)\n\t\tconst refreshToken = localStorage.getItem(Config.localStorage.refreshToken)\n\t\tconst expiryStr = localStorage.getItem(Config.localStorage.tokenExpiry)\n\t\tif (accessToken && refreshToken && expiryStr) {\n\t\t\tconst now = moment(new Date())\n\t\t\tconst expiry = moment(expiryStr)\n\t\t\tconst dur = moment.duration(expiry.diff(now)).asSeconds()\n\t\t\tif (dur < 0){\n\t\t\t\t// request new tokens\n\t\t\t\treturn true\n\t\t\t}\n\t\t\tthis.setState({accessToken})\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\n\tclearLocalStorage(): void {\n\t\tconst keys = [\n\t\t\tConfig.localStorage.accessToken,\n\t\t\tConfig.localStorage.refreshToken,\n\t\t\tConfig.localStorage.tokenExpiry\n\t\t]\n\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\tlocalStorage.removeItem(keys[i])\n\t\t}\n\t}\n\n\tcheckCookies(): boolean {\n\t\tconst accessToken = Cookies.get(Config.cookie.spotifyAccessToken);\n\t\tconst refreshToken = Cookies.get(Config.cookie.spotifyRefreshToken);\n\t\tconst tokenExpiry = Cookies.get(Config.cookie.spotifyTokenExpiry);\n\t\tif (accessToken && refreshToken && tokenExpiry) {\n\t\t\tlocalStorage.setItem(Config.localStorage.accessToken, accessToken)\n\t\t\tlocalStorage.setItem(Config.localStorage.refreshToken, refreshToken)\n\t\t\tlocalStorage.setItem(Config.localStorage.tokenExpiry, tokenExpiry)\n\t\t\tthis.setState({accessToken})\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\n\tonLogoutClick(): void {\n\t\tthis.clearLocalStorage()\n\t\tlocation.reload()\n\t}\n\n\tcomponentWillMount() {\n\t\tif (this.checkLocalStorage()) {\n\t\t\t// render user\n\t\t\treturn\n\t\t}\n\t\tif (this.checkCookies()) {\n\t\t\t// render user\n\t\t\treturn\n\t\t}\n\t\t// render public\n\t}\n\n\trender() {\n\t\tconsole.log(\"accessToken:\", this.state.accessToken)\n\t\treturn(\n\t\t\t<div id=\"app-container\">\n\t\t\t\t<h1>myapp-app</h1>\n\t\t\t\t{this.state.accessToken ?\n\t\t\t\t\t<a href=\"#\" onClick={this.onLogoutClick.bind(this)}>Log out</a>\n\t\t\t\t\t:\n\t\t\t\t\t<a href={Config.apiURL+\"/login\"}>Log in with Spotify</a>\n\t\t\t\t}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nReactDOM.render(<App />, document.getElementById(\"app\"))\n\n\n// WEBPACK FOOTER //\n// ./src/index.tsx","module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 1\n// module chunks = 0","module.exports = ReactDOM;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDOM\"\n// module id = 2\n// module chunks = 0","module.exports = Cookies;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Cookies\"\n// module id = 3\n// module chunks = 0","module.exports = moment;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 4\n// module chunks = 0","interface config {\n\tauth: {\n\t\tauthorizeURL: string\n\t\ttokenURL: string\n\t\tredirect: string\n\t\tscope: string[]\n\t}\n\tcookie: {\n\t\tspotifyAccessToken: string\n\t\tspotifyAuthState: string\n\t\tspotifyRefreshToken: string\n\t\tspotifyTokenExpiry: string\n\t}\n\tlocalStorage: {\n\t\taccessToken: string\n\t\trefreshToken: string\n\t\ttokenExpiry: string\n\t}\n\tenv: {\n\t\tspotifyID: string\n\t\tspotifySecret: string\n\t}\n\tpath: string\n\tport: number\n\tapiURL: string\n\tappURL: string\n}\n\nexport const Config: config = require(\"../config/config.json\")\n\n\n// WEBPACK FOOTER //\n// ./src/config.ts","module.exports = {\"auth\":{\"authorizeURL\":\"https://accounts.spotify.com/authorize/\",\"tokenURL\":\"https://accounts.spotify.com/api/token\",\"redirect\":\"http://localhost:3000/callback\",\"scope\":[\"user-modify-playback-state\",\"user-read-currently-playing\",\"user-read-playback-state\",\"user-read-recently-played\"]},\"cookie\":{\"spotifyAccessToken\":\"spotify_access_token\",\"spotifyAuthState\":\"spotify_auth_state\",\"spotifyRefreshToken\":\"spotify_refresh_token\",\"spotifyTokenExpiry\":\"spotify_token_expiry\"},\"localStorage\":{\"accessToken\":\"accessToken\",\"refreshToken\":\"refreshToken\",\"tokenExpiry\":\"tokenExpiry\"},\"env\":{\"spotifyID\":\"SPOTIFY_ID\",\"spotifySecret\":\"SPOTIFY_SECRET\"},\"path\":\"./public\",\"port\":3000,\"apiURL\":\"http://localhost:3000\",\"appURL\":\"http://localhost:8080\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./config/config.json\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}